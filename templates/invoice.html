<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Invoice {{ invoice_number }}</title>
    <style>
        * {
            margin: 0;   
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 20px;
            line-height: 1.4;
            color: #2c3e50;
            background: white;
            margin: 0;
            padding: 0;
            width: 100%;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        
        /* Page setup for A4 */
        @page {
            size: A4;
            margin: 2mm;
        }
        
        @media print {
            html, body {
                width: 100%;
                height: 100%;
            }
        }
        
        /* Main Container */
        .invoice-container {
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 2px;
            background: white;
        }
        
        /* Header Section - REORGANIZED */
        .header-section {
            margin-bottom: 4px;
            width: 100%;
        }
        .header-table { width: 100%; border-collapse: collapse; }
        .header-left { width: 60%; vertical-align: top; }
        .header-right { width: 40%; vertical-align: top; text-align: right; }
        
        .logo-container { margin-bottom: 2px; text-align: left; }
        
        .logo { width: 150px; height: auto; }
        
        .stars-container { margin-bottom: 1px; text-align: left; }
        
        .star {
            color: #FFD700;
            font-size: 32px;
            margin: 0 2px;
        }
        
        .company-info { margin-bottom: 3px; line-height: 1.4; text-align: left; }
        
        .company-name {
            font-size: 32px;
            font-weight: 700;
            color: #ca8015;
            margin-bottom: 2px;
        }
        
        .company-address { font-size: 16px; color: #495057; margin-bottom: 2px; }
        
        .company-contact { font-size: 16px; color: #495057; }
        
        .billing-info { 
            text-align: right; 
            line-height: 1.4;
        }
        
        .billing-info .company-name {
            font-size: 28px;
            margin-bottom: 3px;
        }
        
        .billing-info .company-address {
            font-size: 16px;
            margin-bottom: 2px;
        }
        
        .billing-info .company-contact {
            font-size: 16px;
        }
        
        /* Invoice Details Section */
        .invoice-details-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 3px;
            margin-bottom: 3px;
            width: 100%;
        }
        
        .invoice-title { font-size: 36px; font-weight: 800; color: #ca8015; margin-bottom: 6px; text-align: center; }
        
        .invoice-info-grid { display: none; }
        .invoice-info-table .col-left { padding-right: 8px; }
        .invoice-info-table .col-right { padding-left: 10px; text-align: right; border-left: 1px solid #e9ecef; }
        
        .invoice-info-left, .invoice-info-right {
            display: flex;
            flex-direction: column;
            gap: 0px;
        }
        
        .info-item { font-size: 20px; color: #495057; line-height: 1.3; }
        
        .info-item strong {
            color: #2c3e50;
            font-weight: 600;
        }
        
        /* Main Content Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 3fr 2fr;
            gap: 4px;
            margin-top: 2px;
            width: 100%;
        }
        
        /* Left Column */
        .left-column {
            display: grid;
            grid-template-rows: auto;
            gap: 6px;
        }
        
        /* Right Column */
        .right-column {
            display: grid;
            grid-template-rows: auto auto auto auto;
            gap: 6px;
        }
        
        /* Cards */
        .card { background: #fff; border: 1px solid #ddd; border-radius: 6px; padding: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); width: 100%; }
        
        .card-header { font-size: 22px; font-weight: 700; color: #ca8015; margin-bottom: 6px; padding-bottom: 4px; border-bottom: 1px solid #e6a533; text-transform: uppercase; letter-spacing: 0.3px; }
        
        .card-content {
            font-size: 20px;
            line-height: 1.3;
        }
        
        .card-content ul {
            list-style: none;
            padding: 0;
        }
        
        .card-content li {
            padding: 2px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .card-content li:last-child {
            border-bottom: none;
        }
        
        .card-content strong {
            color: #2c3e50;
            font-weight: 600;
        }
        
        /* Table Styling */
        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 18px;
        }
        
        .table th { background-color: #ca8015; color: #ffffff; padding: 12px 16px; text-align: center; font-size: 18px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.3px; border: 1px solid #e6a533; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        
        .table td { padding: 10px 16px; border: 1px solid #ddd; font-size: 17px; vertical-align: top; }

        .table th:first-child, .table td:first-child { padding-left: 8px; text-align: left; }
        
        .table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-muted { color: #6c757d; font-size: 12px; }
        .mono { font-family: 'Courier New', monospace; font-weight: 600; }
        
        .col-qty { width: 48px; }
        .col-price { width: 120px; }
        .col-total { width: 180px; }
        
        /* Table Footer */
        .table tfoot th {
            background: #2c3e50;
            color: white;
            font-weight: 700;
            text-align: left;
        }
        
        /* Two-column card layout inside right column */
        .two-col-table { width: 100%; border-collapse: collapse; }
        .two-col-table td { vertical-align: top; padding: 8px 10px; }
        /* Emphasis styles for the immediate two-column notes/details card */
        .emph .card-header { font-size: 22px; margin-bottom: 6px; padding-bottom: 4px; }
        .emph .card-content { font-size: 20px; line-height: 1.3; }
        .emph .card-content p { margin-bottom: 4px; }
        .emph .card-content li { padding: 3px 0; }
        
        .amount-label { font-size: 14px; color: #6c757d; margin-bottom: 4px; }
        
        .amount-value { font-size: 32px; font-weight: 800; color: #ca8015; letter-spacing: 0.5px; }
        
        /* Compact spacing */
        .compact {
            padding: 4px;
        }
        
        .compact .card-header {
            font-size: 17px;
            margin-bottom: 2px;
            padding-bottom: 2px;
        }
        
        .compact .card-content li {
            padding: 2px 0;
            font-size: 14px;
        }
        
        /* Policy Section Styling */
        .policy-section {
            margin-bottom: 2px;
        }
        
        .policy-section:last-child {
            margin-bottom: 0;
        }
        
        .policy-section p {
            margin-bottom: 3px;
            font-size: 19px;
            line-height: 1.2;
        }
        
        .policy-section strong {
            color: #ca8015;
            font-weight: 700;
            font-size: 19px;
            display: block;
            margin-bottom: 1px;
        }
        
        .policy-section ul {
            margin-left: 4px;
            margin-bottom: 1px;
        }
        
        .policy-section ul li {
            padding: 1px 0;
            font-size: 17px;
            line-height: 1.2;
        }
        
        /* Print optimizations */
        @media print {
            .invoice-container {
                padding: 0;
                width: 100%;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #ccc;
                page-break-inside: avoid;
                width: 100%;
            }
            
            .main-grid {
                page-break-inside: avoid;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="invoice-container">
        <!-- Header Section - REORGANIZED -->
        <div class="header-section">
            <table class="header-table">
                <tr>
                    <td class="header-left">
                        <div class="logo-container">
                            <img class="logo" src="{{ logo_file_url }}" alt="Ulendo Lodge Logo" />
                        </div>
                        <div class="stars-container">
                            <span class="star">★</span>
                            <span class="star">★</span>
                            <span class="star">★</span>
                            <span class="star">★</span>
                        </div>
                        <div class="company-info">
                            <div class="company-name">Ulendo Lodge & Apartments</div>
                            <div class="company-address">10 Sinclair Road, Lambton, Germiston, 1401</div>
                            <div class="company-contact">
                                Tel: 067 623 7170<br>
                                Tel: 010 824 4595<br>
                                Email: info@ulendolodge.com<br>
                                Reg Nr. 2016/078946/07
                            </div>
                        </div>
                    </td>
                    <td class="header-right">
                        <div class="billing-info">
                            <div class="company-name">Billing Address</div>
                            <div class="company-address">Travel with Flair (Pty) Ltd<br>Private Bag 11291, Maroelana, Pretoria</div>
                            <div class="company-contact">
                                Tel: 012 424 3300<br>
                                Email: supplier.invoices@twf.co.za
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        
        <!-- Invoice Details Section -->
        <div class="invoice-details-section">
            <div class="invoice-title">Invoice</div>
            
            <table class="invoice-info-table" width="100%" cellspacing="0" cellpadding="0">
                <tr>
                    <td class="col-left" width="60%" valign="top">
                        <div class="info-item"><strong>NO:</strong> {{ invoice_number }}</div>
                        <div class="info-item"><strong>Voucher:</strong> {{ data.voucher_number or 'N/A' }}</div>
                        <div class="info-item"><strong>Guest Name:</strong> {{ data.customer_name or 'N/A' }}</div>
                    </td>
                    <td class="col-right" width="40%" valign="top">
                        <div class="info-item"><strong>Date:</strong> {{ today }}</div>
                        <div class="info-item"><strong>Check-in Date:</strong> {{ data.check_in or 'N/A' }}</div>
                        <div class="info-item"><strong>Check-out Date:</strong> {{ data.check_out or 'N/A' }}</div>
                    </td>
                </tr>
            </table>
            
            </div>
        </div>
        
        <!-- Main Grid -->
        <div class="main-grid">
            <!-- LEFT COLUMN - WIDER FOR SERVICES TABLE -->
            <div class="left-column">
                <!-- Services Table -->
                <div class="card">
                    <div class="card-header">Services & Charges</div>
                    <div class="card-content">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th class="col-qty">Qty</th>
                                    <th class="col-price">Price</th>
                                    <th class="col-total">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in data.line_items %}
                                <tr>
                                    <td>
                                        {{ item.description }}
                                    </td>
                                    <td class="text-center"><span class="mono">{{ item.qty }}</span></td>
                                    <td class="text-right"><span class="mono">R{{ "%.2f"|format(item.unit_price) }}</span></td>
                                    <td class="text-right"><strong class="mono">R{{ "%.2f"|format(item.total) }}</strong></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                <tr class="payment-received">
                                    <th colspan="3">Invoice Total:</th>
                                    <th>{{ data.invoice_total|zar if data.invoice_total else 'R0.00' }}</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- RIGHT COLUMN - NARROWER FOR SUMMARY CARDS -->
            <div class="right-column">
                
                <div class="card emph">
                    <table class="two-col-table" width="100%">
                        <tr>
                            <td width="50%">
                                <div class="card-header">Payment Details</div>
                                <div class="card-content">
                                    <ul>
                                        <li><strong>Account Name:</strong> Ulendo Lodge And Apartments</li>
                                        <li><strong>Bank Name:</strong> Standard Bank</li>
                                        <li><strong>Account Number:</strong> 10 23 106 061 9</li>
                                        <li><strong>Branch Code:</strong> 002442</li>
                                    </ul>
                                </div>
                            </td>
                            <td width="50%">
                                <div class="card-header">Important Notes</div>
                                <div class="card-content">
                                    <p><strong>Proof of Payment:</strong> Send to info@ulendolodge.com</p>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="card">
                    <div class="card-header">Policies & Information</div>
                    <div class="card-content">
                        <div class="policy-section">
                            <strong>House Rules:</strong>
                            <ul>
                                <li>Check-in time is any time after 14:00</li>
                                <li>Check-out is 10:00 the following day</li>
                                <li>Please respect other Guests in terms of noise. Lapa and braai areas may not be occupied after 10pm.</li>
                            </ul>
                        </div>
                        <div class="policy-section">
                            <strong>Refund Policy:</strong>
                            <ul>
                                <li>100% Refund will be granted with 72 hours notice of check in.</li>
                                <li>50% Refund will be granted with 24 hours notice of check in.</li>
                                <li>Failure to check in will result in zero refund as the room was reserved and not occupied.</li>
                            </ul>
                        </div>
                        <div class="policy-section">
                            <strong>Public Liability:</strong>
                            <ul>
                                <li>Ulendo Lodge has the right to reserve admission. We are not responsible for any damage/loss of any kind to visitor property. Visitors will be held accountable for any damages to business property.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
